# ConcreteSky optional JWT auth (for MCP / automated UI tests)
#
# Copy to .env and fill values:
#   cp .env.example .env
#
# IMPORTANT: never commit .env with secrets.

# Bluesky / ATProto settings

# The PDS base URL to talk to (default: https://bsky.social)
BSKY_PDS=https://bsky.social

# Enable verbose server-side logging (0/1)
BSKY_DEBUG=0

# Optional: override the OAuth issuer for auth flows.
# Most installs should leave this unset.
BSKY_OAUTH_ISSUER=

# Optional: legacy env-based login (no longer required)
#
# ConcreteSky primarily uses OAuth. These are kept for back-compat/dev, but are not recommended.
BSKY_HANDLE=
BSKY_APP_PASSWORD=

# Optional: cache / query behavior

# If set (>0), some UI/views may treat older posts as out-of-scope for “recent” operations.
# Leave 0 to disable.
BSKY_POST_RETENTION_DAYS=0

# Enable JWT support in the ConcreteSky API (Authorization: Bearer <token>)
CONCRETESKY_JWT_ENABLED=0

# Strong random secret (>= 32 chars recommended)
CONCRETESKY_JWT_SECRET=

# Allowed Concrete CMS usernames (comma-separated). Token "sub" must match one of these.
# Example: CONCRETESKY_JWT_USERS=tbi
CONCRETESKY_JWT_USERS=

# Require that the JWT user is a Concrete "Super User" (recommended)
CONCRETESKY_JWT_REQUIRE_SUPERUSER=1

# Token lifetime in seconds when generating with the helper tool
CONCRETESKY_JWT_TTL_SECONDS=86400

# Optional: If set, the API will reject requests that do not include a valid JWT.
# Leave 0 to keep normal browser/CSRF flow working.
CONCRETESKY_JWT_ENFORCE=0

# Optional MCP / automation: JWT → ConcreteCMS session bridge (cookie login)
#
# When enabled, a caller with a valid JWT may call {"method":"mcpLogin"} to establish
# a ConcreteCMS session cookie usable by browser automation.
CONCRETESKY_MCP_LOGIN_ENABLED=0

# Optional (dangerous): allow a superuser JWT to impersonate a different Concrete username
# via params.userName. Leave disabled unless you fully control the environment.
CONCRETESKY_MCP_LOGIN_ALLOW_IMPERSONATE=0

# Optional: Post translation backend (for "Translate" UI)
#
# ConcreteSky does not ship a translation service by default.
# Set a backend here to enable translations in the UI.
#
# Supported values:
#   - none (default)
#   - libretranslate
CONCRETESKY_TRANSLATE_BACKEND=none

# LibreTranslate backend settings
#
# For local testing you can run LibreTranslate yourself, or point at a public instance.
# Public instances can be rate-limited or unreliable; for production, self-host.
CONCRETESKY_TRANSLATE_LIBRETRANSLATE_URL=https://libretranslate.com

# Optional API key (leave blank for instances that don't require one)
CONCRETESKY_TRANSLATE_LIBRETRANSLATE_API_KEY=

# SQLite cache location
#
# Default (if unset): packages/concretesky/db
# Recommended for production: set this to a non-web-accessible directory outside the web root,
# e.g. /var/lib/concretesky (must be writable by the PHP user).
CONCRETESKY_CACHE_DIR=
